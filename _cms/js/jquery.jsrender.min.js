this.jsviews||this.jQuery&&jQuery.views||function(a,b){function D(a){this.name="JsRender Error",this.message=a||"JsRender error"}function E(a,b){if(!C.rTag||arguments.length){h=a?"\\"+a.charAt(0):h;i=a?"\\"+a.charAt(1):i;j=b?"\\"+b.charAt(0):j;k=b?"\\"+b.charAt(0):k;C.rTag=e="(?:(?:(\\w+(?=[\\/\\s"+j+"]))|(?:(\\w+)?(:)|(>)|(\\*)))"+"\\s*((?:[^"+j+"]|"+j+"(?!"+k+"))*?)";e=new RegExp(h+i+e+"(\\/)?|(?:\\/(\\w+)))"+j+k,"g");f=new RegExp("<.*>|([^\\\\]|^)[{}]|"+h+i+".*"+j+k)}return[h,i,j,k]}function F(a){var c=this,d=c.tmpl.helpers||{};a=(c.ctx[a]!==b?c.ctx:d[a]!==b?d:M[a]!==b?M:{})[a];return typeof a!=="function"?a:function(){return a.apply(c,arguments)}}function G(a,b,c,d){var e=c.converters;e=e&&e[a]||N[a];return e?e.call(b,d):(P("Unknown converter: {{"+a+":"),d)}function H(a,c,d,e,f,g){var h,i=d.tags,j=d.templates,k=g.props=g.props||{},l=k.tmpl,m=arguments.length>6?A.call(arguments,6):[],o=i&&i[a]||L[a];if(!o){P("Unknown tag: {{"+a+"}}");return""}if(l){delete k.tmpl}f=f&&d.tmpls[f-1];l=l||f||b;g.tmpl=""+l===l?j&&j[l]||K[l]||K(l):l;g.isTag=n;g.converter=e;g.view=c;g.renderContent=O;h=o.apply(g,m);return h||(h==b?"":h.toString())}function I(a,c,d,e,f,g,h,i){var j,k={tmpl:f,path:c,parent:d,data:e,ctx:a,views:i?[]:{},_useKey:i?0:1,_hlp:F,_onRender:h};if(d){j=d.views;if(d._useKey){j[k.key="_"+d._useKey++]=k;k.index=d.index}else{j.splice(k.key=k.index=g!==b?g:j.length,0,k)}}return k}function J(a,c,d,e,f){var g,h;if(d&&typeof d==="object"&&!d.nodeType){for(g in d){c(g,d[g])}return a}if(!d||e===b){if(f){e=f(b,e||d)}}else if(""+d===d){if(e===null){delete c[d]}else if(e=f?f(d,e):e){c[d]=e}}if(h=l.onStoreItem){h(c,d,e,f)}return e}function K(a,b){return J(this,K,a,b,U)}function L(a,b){return J(this,L,a,b)}function M(a,b){return J(this,M,a,b)}function N(a,b){return J(this,N,a,b)}function O(a,c,e,f,h,i,j){var k,l,o,p,q,r,s,t,u,v,w=this,x="";if(f===n){u=n;f=0}if(w.isTag){s=w.tmpl;if(c||w.ctx){v={};if(w.ctx){g(v,w.ctx)}if(c){g(v,c)}}c=v;t=w.props;if(t&&t.link===m){c=c||{};c.link=m}e=e||w.view;i=i||w.path;f=f||w.key}else{s=w.jquery&&(w[0]||P('Unknown template: "'+w.selector+'"'))||w}if(s){if(e){r=e.ctx;if(a===e){a=e.data;h=n}j=j||e._onRender}else{r=M}c=c&&c!==r?g(g({},r),c):r;if(!s.fn){s=K[s]||K(s)}if(s){j=c.link!==m&&j;if(d.isArray(a)&&!h){p=u?e:f!==b&&e||I(c,i,e,a,s,f,j,n);for(k=0,l=a.length;k<l;k++){o=a[k];q=s.fn(o,I(c,i,p,o,s,(f||0)+k,j),C);x+=j?j(q,s,t):q}}else{p=u?e:I(c,i,e,a,s,f,j);p._onRender=j;x+=s.fn(a,p,C)}return j?j(x,s,t,p.key,i):x}}P("No template found");return""}function P(a){if(C.debugMode){throw new C.Error(a)}}function Q(a){P("Syntax error\n"+a)}function R(a,b,c){function l(b){b-=h;if(b){j.push(a.substr(h,b).replace(r,"\\n"))}}function m(b){b&&Q('Unmatched or missing tag: "{{/'+b+'}}" in template:\n'+a)}function o(b,e,g,o,p,q,r,t,v,w){if(p){o=":";g="html"}var x,y="",z="",A=!t&&!o&&!c;e=e||o;l(w);h=w+b.length;if(q){if(f){j.push(["*",r.replace(s,"$1")])}}else if(e){if(e==="else"){k[5]=a.substring(k[5],w);k=i.pop();j=k[3];A=n}r=r?T(r,c).replace(u,function(a,b,c){if(b){z+=c+","}else{y+=c+","}return""}):"";y=y.slice(0,-1);r=r.slice(0,-1);d=[e,g||"",r,A&&[],"{"+(y?"props:{"+y+"},":"")+"path:'"+r+"'"+(z?",ctx:{"+z.slice(0,-1)+"}":"")+"}"];j.push(d);if(A){i.push(k);k=d;k[5]=h}}else if(v){x=k[0];m(v!==x&&!(v==="if"&&x==="else")&&x);k[5]=a.substring(k[5],w);k=i.pop()}m(!k&&v);j=k[3]}var d,f=b&&b.allowCode,g=[],h=0,i=[],j=g,k=[,,,g];a=a.replace(t,"\\$1");m(i[0]&&i[0][3].pop()[0]);a.replace(e,o);l(a.length);return S(g,b)}function S(a,b){var c,d,e,f,g,h,i,j,k,l,m,o,p,q,r,s,t=b?{allowCode:r=b.allowCode,debug:b.debug}:{},u=b&&b.tmpls,v=0;e=a.length;f=e?"":'"";';for(d=0;d<e;d++){c=a[d];if(""+c===c){f+='"'+c+'"+'}else{l=c[0];if(l==="*"){f=f.slice(0,d?-1:-3)+";"+c[1]+(d+1<e?"ret+=":"")}else{m=c[1];o=c[2];s=c[3];p=c[4];markup=c[5];if(s){q=V(markup,t,b,v++);S(c[3],q);u.push(q)}k=k||p.indexOf("view")>-1;f+=(l===":"?m==="html"?(h=n,"e("+o):m?(j=n,'c("'+m+'",view,this,'+o):(i=n,"((v="+o+')!=u?v:""'):(g=n,'t("'+l+'",view,this,"'+(m||"")+'",'+(s?u.length:'""')+","+p+(o?",":"")+o))+")+"}}}f=y+(i?"v,":"")+(g?"t=j._tag,":"")+(j?"c=j._convert,":"")+(h?"e=j.converters.html,":"")+"ret; try{\n\n"+(t.debug?"debugger;":"")+(r?"ret=":"return ")+f.slice(0,-1)+";\n\n"+(r?"return ret;":"")+"}catch(e){return j._err(e);}";try{f=new Function("data, view, j, b, u",f)}catch(w){Q("Compiled template code:\n\n"+f,w)}if(b){b.fn=f}return f}function T(a,b){function h(h,i,j,k,l,o,q,r,s,t,u,v,w,x,y,z){function B(a,b,c,d,e,f,g){if(b){var h,i=(c?'view._hlp("'+c+'")':d?"view":"data")+(g?(e?"."+e:c?"":d?"":"."+b)+(f||""):(g=c?"":d?e||"":b,""));h=g?"."+g:"";if(!A){i=i+h}i=i.slice(0,9)==="view.data"?i.slice(5):i;if(A){i="b("+i+',"'+g+'")'+h}return i}return a}l=l||"";j=j||i||u;k=k||r;s=s||y||"";l=l||"";var A=b&&s!=="(";if(o){Q(a)}else{return g?(g=!v,g?h:'"'):f?(f=!w,f?h:'"'):(j?(e++,j):"")+(z?e?"":c?(c=m,"\b"):",":q?(e&&Q(a),c=n,"\b"+k+":"):k?k.replace(p,B)+(s?(d[++e]=n,s):l):l?l:x?(d[e--]=m,x)+(s?(d[++e]=n,s):""):t?(d[e]||Q(a),","):i?"":(g=v,f=w,'"'))}}var c,d={},e=0,f=m,g=m;a=(a+" ").replace(q,h);return a}function U(a,c,d,e){function m(b){if(""+b===b||b.nodeType>0){try{i=b.nodeType>0?b:!f.test(b)&&o&&o(b)[0]}catch(c){}if(i){if(!i.type){return}b=K[i.getAttribute(x)];if(!b){a=a||"_"+v++;i.setAttribute(x,a);b=U(a,i.innerHTML,d,e);K[a]=b}}return b}}var h,i,j,k,l;c=c||"";h=m(c);e=e||(c.markup?c:{});e.name=a;k=e.templates;if(!h&&c.markup&&(h=m(c.markup))){if(h.fn&&(h.debug!==c.debug||h.allowCode!==c.allowCode)){h=h.markup}}if(h!==b){if(a&&!d){B[a]=function(){return c.render.apply(c,arguments)}}if(h.fn||c.fn){if(h.fn){if(a&&a!==h.name){c=g(g({},h),e)}else{c=h}}}else{c=V(h,e,d,0);R(h,c)}for(j in k){l=k[j];if(l.name!==j){k[j]=U(j,l,c)}}return c}}function V(a,b,c,d){function e(a){if(c[a]){f[a]=g(g({},c[a]),b[a])}}b=b||{};var f={markup:a,tmpls:[],links:[],render:O};if(c){if(c.templates){f.templates=g(g({},c.templates),b.templates)}f.parent=c;f.name=c.name+"["+d+"]";f.key=d}g(f,b);if(c){e("templates");e("tags");e("helpers");e("converters")}return f}function W(a){return w[a]||(w[a]="&#"+a.charCodeAt(0)+";")}var c="v1.0pre",d,e,f,g,h="{",i="{",j="}",k="}",l={},m=false,n=true,o=a.jQuery,p=/^(?:null|true|false|\d[\d.]*|([\w$]+|~([\w$]+)|#(view|([\w$]+))?)([\w$.]*?)(?:[.[]([\w$]+)\]?)?|(['"]).*\8)$/g,q=/(\()(?=|\s*\()|(?:([([])\s*)?(?:([#~]?[\w$.]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*!:?\/]|(=))\s*|([#~]?[\w$.]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*([)\]])([([]?))|(\s+)/g,r=/\r?\n/g,s=/\\(['"])/g,t=/\\?(['"])/g,u=/\x08(~)?([^\x08]+)\x08/g,v=0,w={"&":"&","<":"<",">":">"},x="data-jsv-tmpl",y="var j=j||"+(o?"jQuery.":"js")+"views,",z=/[\x00"&'<>]/g,A=Array.prototype.slice,B={},C={jsviews:c,sub:l,debugMode:n,render:B,templates:K,tags:L,helpers:M,converters:N,delimiters:E,View:I,_convert:G,_err:function(a){return C.debugMode?"Error: "+(a.message||a)+". ":'""'},_tmplFn:R,_tag:H,error:P,Error:D};(D.prototype=new Error).constructor=D;if(o){d=o;d.templates=K;d.render=B;d.views=C;d.fn.render=O}else{d=a.jsviews=C;d.extend=function(a,b){var c;a=a||{};for(c in b){a[c]=b[c]}return a};d.isArray=Array&&Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"}}g=d.extend;L({"if":function(){var a=this,c=a.view;c.onElse=function(a,d){var e=0,f=d.length;while(f&&!d[e++]){if(e===f){return""}}c.onElse=b;a.path="";return a.renderContent(c)};return c.onElse(this,arguments)},"else":function(){var a=this.view;return a.onElse?a.onElse(this,arguments):""},"for":function(){var a,b=this,c="",d=arguments,e=d.length;if(e===0){e=1}for(a=0;a<e;a++){c+=b.renderContent(d[a])}return c},"*":function(a){return a}});N({html:function(a){return a!=b?String(a).replace(z,W):""}});E()}(this)